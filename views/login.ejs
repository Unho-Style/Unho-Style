<style>
    .formdiv {
        width: 80vw;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
</style>

<div class="formdiv">
    <h1>로그인</h1>

    <form class="loginForm" novalidate method="POST" action="javascript:void(0);" onSubmit="login()">
        <div class="form-group">
          <label for="id">사용자 ID</label>
          <input type="text" class="form-control" id="id" aria-describedby="userIDHelp" placeholder="사용자 ID" required>
          <div class="invalid-feedback id">사용자를 찾을 수 없습니다.<br>ID 및 비밀번호를 확인해주세요.</div>
        </div>
        <div class="form-group">
            <label for="email">비밀번호</label>
            <input type="password" class="form-control" id="password" aria-describedby="passwordHelp" placeholder="비밀번호" required>          
        </div>
        <button type="submit" style="margin-top: 3vh;" class="btn btn-primary">로그인</button>
    </form>
</div>

<script>
    function login() {
        let id = $('#id').val();
        let pw = $('#password').val();

        fetch('/api/user/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                'id': id,
                'password': pw
            })
        }).then((res) => {
            if(res.status == 200) {
                document.location.href = '/';
            }else{
                $('.loginForm').addClass('was-validated');
                $('#id')[0].setCustomValidity('사용자 찾을 수 없음');
                $('#password')[0].setCustomValidity('사용자 찾을 수 없음');
            }
        })
    }
</script>